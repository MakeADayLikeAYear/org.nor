2016-05-21 10:18:47,603 [main] DEBUG org.nor.file.FileReaderTest - start ~ 1
2016-05-21 10:19:45,510 [main] DEBUG org.nor.file.FileReaderTest - start ~ 1
2016-05-21 10:19:45,853 [main] DEBUG org.nor.file.FileReaderTest - start ~ 1
2016-05-21 10:23:40,082 [main] DEBUG org.nor.file.FileReaderTest - targetPath : [E:/새 폴더/새 폴더]
2016-05-21 10:23:40,418 [main] DEBUG org.nor.file.FileReaderTest - result File Count : [15419]
2016-05-21 10:23:40,421 [main] DEBUG org.nor.file.FileReaderTest - targetPath : [E:/새 폴더/새 폴더] filter : [7z]
2016-05-21 10:23:40,741 [main] DEBUG org.nor.file.FileReaderTest - result File Count : [0]
2016-05-21 10:24:09,114 [main] DEBUG org.nor.file.FileReaderTest - targetPath : [E:/새 폴더/새 폴더]
2016-05-21 10:24:09,443 [main] DEBUG org.nor.file.FileReaderTest - result File Count : [15419]
2016-05-21 10:24:09,446 [main] DEBUG org.nor.file.FileReaderTest - targetPath : [E:/새 폴더] filter : [7z]
2016-05-21 10:24:10,041 [main] DEBUG org.nor.file.FileReaderTest - result File Count : [2]
2016-05-21 10:37:53,467 [main] DEBUG org.nor.file.XmlReaderTest - targetPath : [E:/새 폴더/TestFile.xml]
2016-05-21 10:37:53,488 [main] DEBUG org.nor.file.XmlReaderTest - norNode : [
 type:[      null] id/name:[                    ] attribute:[           null] cData:[null][
	 type:[       FDL] id/name:[                    ] attribute:[  {version=1.5}] cData:[null][
		 type:[TypeDefinition] id/name:[                    ] attribute:[{url=..\default_typedef.xml}] cData:[null], 
		 type:[      Form] id/name:[            COA010PR] attribute:[{classname=COA010PR, titletext=원가유형관리, top=0, left=0, oninit=COA010PR_oninit, width=1024, onbeforeclose=COA010PR_onbeforeclose, height=550, onload=COA010PR_onload}] cData:[null][
			 type:[   Layouts] id/name:[                    ] attribute:[             {}] cData:[null][
				 type:[    Layout] id/name:[                    ] attribute:[             {}] cData:[null][
					 type:[       Div] id/name:[          div_Search] attribute:[{scrollbars=none, top=0, left=0, cssclass=div_WF_searchBox, taborder=0, right=20, height=34}] cData:[null][
						 type:[   Layouts] id/name:[                    ] attribute:[             {}] cData:[null][
							 type:[    Layout] id/name:[                    ] attribute:[             {}] cData:[null][
								 type:[    Static] id/name:[        stc_CostType] attribute:[{top=6, left=9, cssclass=sta_WF_scrlabel, onclick=div_Search_stc_CostType_onclick, taborder=3, width=88, text=원가유형, multilang=costType, height=20}] cData:[null], 
								 type:[      Edit] id/name:[        edt_costType] attribute:[{top=6, left=99, taborder=0, width=175, oneditclick=div_Search_edt_costType_oneditclick, height=20}] cData:[null], 
								 type:[    Static] id/name:[     stc_Description] attribute:[{top=6, left=298, cssclass=sta_WF_scrlabel, onclick=div_Search_stc_Description_onclick, taborder=4, width=95, text=Desc, multilang=costTypeNm, height=20}] cData:[null], 
								 type:[      Edit] id/name:[     edt_description] attribute:[{top=6, left=395, taborder=1, width=200, height=20}] cData:[null], 
								 type:[    Button] id/name:[          btn_Search] attribute:[{bottom=5, cssclass=btn_WF_schArea, onclick=div_Search_btn_Search_onclick, taborder=2, width=80, right=10, text=조회, multilang=btnSelect, height=22}] cData:[null]]]], 
					 type:[       Div] id/name:[            div_Data] attribute:[{top=44, left=0, bottom=0, taborder=1, right=20, text=Div00}] cData:[null][
						 type:[   Layouts] id/name:[                    ] attribute:[             {}] cData:[null][
							 type:[    Layout] id/name:[                    ] attribute:[             {}] cData:[null][
								 type:[      Grid] id/name:[            grd_List] attribute:[{autofittype=col, top=26, binddataset=ds_costType, left=0, bottom=0, useinputpanel=false, taborder=2, onheadclick=div_Data_grd_List_onheadclick, right=0, cellsizingtype=col, autoenter=select, status=all}] cData:[null][
									 type:[   Formats] id/name:[                    ] attribute:[             {}] cData:[null][
										 type:[    Format] id/name:[             default] attribute:[             {}] cData:[null][
											 type:[   Columns] id/name:[                    ] attribute:[             {}] cData:[null][
												 type:[    Column] id/name:[                    ] attribute:[       {size=0}] cData:[null], 
												 type:[    Column] id/name:[                    ] attribute:[       {size=0}] cData:[null], 
												 type:[    Column] id/name:[                    ] attribute:[       {size=0}] cData:[null], 
												 type:[    Column] id/name:[                    ] attribute:[       {size=0}] cData:[null], 
												 type:[    Column] id/name:[                    ] attribute:[       {size=0}] cData:[null], 
												 type:[    Column] id/name:[                    ] attribute:[       {size=0}] cData:[null], 
												 type:[    Column] id/name:[                    ] attribute:[       {size=0}] cData:[null], 
												 type:[    Column] id/name:[                    ] attribute:[       {size=0}] cData:[null], 
												 type:[    Column] id/name:[                    ] attribute:[       {size=0}] cData:[null], 
												 type:[    Column] id/name:[                    ] attribute:[       {size=0}] cData:[null], 
												 type:[    Column] id/name:[                    ] attribute:[       {size=0}] cData:[null], 
												 type:[    Column] id/name:[                    ] attribute:[       {size=0}] cData:[null], 
												 type:[    Column] id/name:[                    ] attribute:[     {size=200}] cData:[null], 
												 type:[    Column] id/name:[                    ] attribute:[     {size=544}] cData:[null], 
												 type:[    Column] id/name:[                    ] attribute:[      {size=80}] cData:[null]], 
											 type:[      Rows] id/name:[                    ] attribute:[             {}] cData:[null][
												 type:[       Row] id/name:[                    ] attribute:[{size=24, band=head}] cData:[null], 
												 type:[       Row] id/name:[                    ] attribute:[      {size=24}] cData:[null]], 
											 type:[      Band] id/name:[                head] attribute:[             {}] cData:[null][
												 type:[      Cell] id/name:[                    ] attribute:[{text=lastUpdateTimestamp}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=1, text=lastUpdateProgramId}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=2, text=lastUpdateLocalTimestamp}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=3, text=lastUpdatedObjectId}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=4, text=creationTimestamp}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=5, text=creationLocalTimestamp}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=6, text=createdProgramId}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=7, text=createdObjectId}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=8, text=costTypeId}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=9, text=costTypeFlag}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=10, text=companyCd}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=11, text=coCostTypeKey}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=12, displaytype=normal, editdisplay=edit, expandchar=costType, cssclass=comIndisp, text=원가유형}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=13, expandchar=costTypeNm, cssclass=comIndisp, text=Desc}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=14, expandchar=disableDate, text=무효일자}] cData:[null]], 
											 type:[      Band] id/name:[                body] attribute:[             {}] cData:[null][
												 type:[      Cell] id/name:[                    ] attribute:[{text=bind:lastUpdateTimestamp}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=1, text=bind:lastUpdateProgramId}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=2, text=bind:lastUpdateLocalTimestamp}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=3, text=bind:lastUpdatedObjectId}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=4, text=bind:creationTimestamp}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=5, text=bind:creationLocalTimestamp}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=6, text=bind:createdProgramId}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=7, text=bind:createdObjectId}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=8, text=bind:costTypeId}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=9, text=bind:costTypeFlag}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=10, text=bind:companyCd}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=11, text=bind:coCostTypeKey}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=12, displaytype=text, style=align:left;, text=bind:costTypeCd, edittype=expr:dataset.getRowType(currow) == 2 ? 'normal' : 'readonly'}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=13, style=align:left;, text=bind:description, edittype=normal}] cData:[null], 
												 type:[      Cell] id/name:[                    ] attribute:[{col=14, displaytype=date, calendardisplaynulltype=nulltext, text=bind:inactiveDate, edittype=date}] cData:[null]]]]], 
								 type:[    Static] id/name:[            stc_Cost] attribute:[{top=0, left=0, cssclass=sta_WF_subtitle, onclick=div_Data_stc_Cost_onclick, taborder=3, width=420, text=Cost Type, multilang=costType, height=22}] cData:[null], 
								 type:[    Button] id/name:[          btn_AddRow] attribute:[{top=0, cssclass=btn_WF_addrow, onclick=div_Data_btn_AddRow_onclick, taborder=0, width=72, right=74, text=행추가, multilang=btnAddRow, height=22}] cData:[null], 
								 type:[    Button] id/name:[            btn_Save] attribute:[{top=0, cssclass=btn_WF_save, onclick=div_Data_btn_Save_onclick, taborder=1, width=72, right=0, text=저    장, multilang=btnInsert, height=22}] cData:[null]]]]]], 
			 type:[   Objects] id/name:[                    ] attribute:[             {}] cData:[null][
				 type:[   Dataset] id/name:[         ds_costType] attribute:[{firenextcount=0, updatecontrol=true, firefirstcount=0, reversesubsum=false, loadkeymode=keep, useclientlayout=true, enableevent=true, loadfiltermode=keep}] cData:[null][
					 type:[ColumnInfo] id/name:[                    ] attribute:[             {}] cData:[null][
						 type:[    Column] id/name:[ lastUpdateTimestamp] attribute:[{size=256, type=STRING}] cData:[null], 
						 type:[    Column] id/name:[ lastUpdateProgramId] attribute:[{size=256, type=STRING}] cData:[null], 
						 type:[    Column] id/name:[lastUpdateLocalTimestamp] attribute:[{size=256, type=STRING}] cData:[null], 
						 type:[    Column] id/name:[ lastUpdatedObjectId] attribute:[{size=256, type=STRING}] cData:[null], 
						 type:[    Column] id/name:[   creationTimestamp] attribute:[{size=256, type=STRING}] cData:[null], 
						 type:[    Column] id/name:[creationLocalTimestamp] attribute:[{size=256, type=STRING}] cData:[null], 
						 type:[    Column] id/name:[    createdProgramId] attribute:[{size=256, type=STRING}] cData:[null], 
						 type:[    Column] id/name:[     createdObjectId] attribute:[{size=256, type=STRING}] cData:[null], 
						 type:[    Column] id/name:[        costTypeFlag] attribute:[{size=256, type=STRING}] cData:[null], 
						 type:[    Column] id/name:[           companyCd] attribute:[{size=256, type=STRING}] cData:[null], 
						 type:[    Column] id/name:[       coCostTypeKey] attribute:[{size=256, type=BIGDECIMAL}] cData:[null], 
						 type:[    Column] id/name:[          costTypeCd] attribute:[{size=256, type=STRING}] cData:[null], 
						 type:[    Column] id/name:[         description] attribute:[{size=256, type=STRING}] cData:[null], 
						 type:[    Column] id/name:[        inactiveDate] attribute:[{size=256, type=STRING}] cData:[null], 
						 type:[    Column] id/name:[          costTypeId] attribute:[{size=256, type=BIGDECIMAL}] cData:[null]]], 
				 type:[   Dataset] id/name:[           ds_search] attribute:[{firenextcount=0, updatecontrol=true, firefirstcount=0, reversesubsum=false, loadkeymode=keep, useclientlayout=true, enableevent=true, loadfiltermode=keep}] cData:[null][
					 type:[ColumnInfo] id/name:[                    ] attribute:[             {}] cData:[null][
						 type:[    Column] id/name:[           companyCd] attribute:[{size=256, type=STRING}] cData:[null], 
						 type:[    Column] id/name:[          costTypeCd] attribute:[{size=256, type=STRING}] cData:[null], 
						 type:[    Column] id/name:[         description] attribute:[{size=256, type=STRING}] cData:[null], 
						 type:[    Column] id/name:[        costTypeFlag] attribute:[{size=256, type=STRING}] cData:[null]], 
					 type:[      Rows] id/name:[                    ] attribute:[             {}] cData:[null][
						 type:[       Row] id/name:[                    ] attribute:[             {}] cData:[null][
							 type:[       Col] id/name:[          costTypeCd] attribute:[             {}] cData:[null], 
							 type:[       Col] id/name:[         description] attribute:[             {}] cData:[null], 
							 type:[       Col] id/name:[           companyCd] attribute:[             {}] cData:[null]]]]], 
			 type:[      Bind] id/name:[                    ] attribute:[             {}] cData:[null][
				 type:[  BindItem] id/name:[               item0] attribute:[{compid=div_Search.edt_costType, columnid=costTypeCd, propid=value, datasetid=ds_search}] cData:[null], 
				 type:[  BindItem] id/name:[               item1] attribute:[{compid=div_Search.edt_description, columnid=description, propid=value, datasetid=ds_search}] cData:[null]], 
			 type:[    Script] id/name:[                    ] attribute:[{type=xscript5.0}] cData:[/*
**********************************************************************
 * 01. 업무구분	: 관리회계(사후원가)
 * 02. 화 면 명	: COA010PR (원가관리 > 원가유형관리)
 * 03. 화면설명	: 표준원가 Rollup을 위해 버전 관리 코드
 * 04. 출력 및 조회 조건 
 * 05. 항목 설명 
 * 06. 비즈니스 로직  (상세기술 권장)
    1) 기존 로직에 컬럼 추가 
        Table : TB_CO_COST_TYPE 
        추가 컬럼 : COST_TYPE_ID  법인 별로 Unique 해야함  (cost_type_id = 1은 Seed 값으로 2부터 시작해야 함)
        저장시 cost_type_flag = 2 로 저장
 * 07. 작 성 일	: 2016-01-07
 * 08. 작 성 자	: 이명광
 * 09. 수정이력
 *********************************************************************
 *     수정일          이  름     사유
 *********************************************************************
 *     2016-01-07     이명광      최초 작성 
 *********************************************************************
*/

/**********************************************************************
 * 공통 라이브러리 INCLUDE 영역
**********************************************************************/
include "Lib::CommLib.xjs";
include "Lib::CommTransaction.xjs";				//Transaction 공통 함수 모음
include "Lib::CommString.xjs";					//String 공통 함수 모음
include "Lib::CommUtil.xjs";					//String 공통 함수 모음

/**********************************************************************
 * 전역변수 영역
**********************************************************************/
this.fv_sCostTyeId = 1;

/**********************************************************************
 * FORM LOAD 영역
**********************************************************************/
this.COA010PR_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	this.gfn_InitForm(obj);
	this.ds_search.setColumn(0, "companyCd", application.gv_CompanyCd);
}


/* Form init시 가변화 화면에서 호출 시 form의 이벤트 enable */
this.COA010PR_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
	this.gfn_SetEnableEvent(obj);
}


/**********************************************************************
 * FORM 공통 FUNCTION 영역
**********************************************************************/


/**********************************************************************
 * TRANSACTION 및 추가 FUNCTION 영역
**********************************************************************/
/* 조회 */
this.fn_Search = function()
{
	var sSvcId = "Search";						// Service ID
	var sSvcNm = "co-ext-COA010PR-service";		// Service Name
	var sSvcEvent = "find";						// Service Event
	
	var sSvcUrl = "nexacro.do?ServiceName=" + sSvcNm + "&" + sSvcEvent + "=event";		// Service 경로

	this.gfn_Transaction(  	  sSvcId						//서비스 구분
							, sSvcUrl						//서비스 경로
							, ""							//Transaction시 Data를 받을 Grid (Default : null)
							, "ds_search=ds_search"			//송신 Dataset(복수일 경우 " "으로 구분)
							, "ds_costType=ds_costType"		//수신 Dataset(복수일 경우 " "으로 구분)
							, ""							//Dataset 외의 Transaction을 위한 인자값
							, true							//ProgressBar 표시여부(default:true) [생략가능]
							, true							//비동기 여부를 지정합니다.(Default : true) [생략가능]
						);
}


/* 저장 */
this.fn_Save = function()
{
	var sSvcId = "Save";						// Service ID
	var sSvcNm = "co-ext-COA010PR-service";		// Service Name
	var sSvcEvent = "save";						// Service Event
	
	var sSvcUrl = "nexacro.do?ServiceName=" + sSvcNm + "&" + sSvcEvent + "=event";		// Service 경로

	this.gfn_Transaction(  	  sSvcId						//서비스 구분
							, sSvcUrl						//서비스 경로
							, ""							//Transaction시 Data를 받을 Grid (Default : null)
							, "ds_Input=ds_costType:U"		//송신 Dataset(복수일 경우 " "으로 구분)
							, ""		                    //수신 Dataset(복수일 경우 " "으로 구분)
							, ""							//Dataset 외의 Transaction을 위한 인자값
							, true							//ProgressBar 표시여부(default:true) [생략가능]
							, true							//비동기 여부를 지정합니다.(Default : true) [생략가능]
						);
}



/* gfn_Transaction 실행 후 callback 처리 */
this.fn_Callback = function (sSvcId, sErrorCode, sErrorMsg)
{
	if(this.gfn_SetCallbsckMsg(sErrorCode, sErrorMsg))
	{
		switch(sSvcId)
		{
			// 조회
			case "Search" :
				//조회 후 삭제 Checkbox를 추가된 행만 작동하도록 edittype 변경!!
				this.div_Data.grd_List.setCellProperty("body", 1, "edittype", "expr:dataset.getRowType(currow) == 2 ? 'checkbox' : 'none'");
				
				break;
			
			// 저장
			case "Save" :
				//저장 후 재조회
				this.fn_Search();
				break;
		}
	}
}


/**********************************************************************
 * 각 COMPONENT 별 EVENT 영역
**********************************************************************/
/* 조회 Button Event */
this.div_Search_btn_Search_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.fn_Search();
}


/* 저장 Button Event */
this.div_Data_btn_Save_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	// 변경사항 확인
	if(!this.gfn_IsDsUpdate(this.ds_costType))
	{
		this.gfn_getCommMsg("FIMU0087");
		return;
	}
	
	// 저장여부 확인 Message
	if (this.gfn_ValidationCheck(this.div_Data.grd_List))
	{
		if (this.gfn_getCommMsg("SMMU0099", "confirm")) this.fn_Save();	
	}	
}


/* 행추가 Button Event */
this.div_Data_btn_AddRow_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var nRow = this.ds_costType.addRow();

	//this.ds_costType.setColumn(nRow, "costTypeId", this.fv_sCostTyeId);
	this.ds_costType.setColumn(nRow, "companyCd", application.gv_CompanyCd);
	this.ds_costType.setColumn(nRow, "costTypeFlag", "2");	// 원가유형구분(1:확정, 2:진행)
	this.ds_costType.setColumn(nRow, "inactiveDate", "29991231");
	this.gfn_SetCellPos(this.div_Data.grd_List, "costTypeCd");
}


/* 창닫을때경고 */
this.COA010PR_onbeforeclose = function(obj:Form, e:nexacro.CloseEventInfo)
{
	var arrDsList = [this.ds_costType];
	return this.gfn_CloseCheckSave(arrDsList);
}]]]]]
